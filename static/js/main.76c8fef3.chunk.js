(this["webpackJsonpa4-app"]=this["webpackJsonpa4-app"]||[]).push([[0],{106:function(e){e.exports=JSON.parse('{"filterOptions":{"Location Type":["Park/Playground","Residential Building/House","Store/Commercial","Street/Sidewalk","Club/Bar/Restaurant","House of Worship"],"borough":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"neighborhood":["Hunts Point and Mott Haven","Central Bronx","East New York and New Lots","Inwood and Washington Heights","High Bridge and Morrisania","Bushwick and Williamsburg","Central Brooklyn","Northeast Bronx","Flatbush","Central Queens","Greenpoint","Upper East Side","Canarsie and Flatlands","Northwest Brooklyn","Northwest Queens","Chelsea and Clinton","Southwest Queens","Southern Brooklyn","Rockaways","Southwest Brooklyn","West Central Queens","Greenwich Village and Soho","Jamaica","Northeast Queens","Stapleton and St. George","Central Harlem","Lower East Side","Southeast Bronx","Lower Manhattan","Upper West Side","Bronx Park and Fordham","West Queens","East Harlem","Sunset Park","neighborhood","Gramercy Park and Murray Hill","Borough Park","Kingsbridge and Riverdale","Long Island City","South Shore","Southeast Queens","North Queens","Mid-Island","Port Richmond","West Side","Tribeca"],"Incident Zip":["10454","10457","11207","10032","10451","10453","11221","11216","11206","11210","11365","10459","11222","10028","11234","11208","11205","11101","10001","11419","11223","11691","11214","11233","11211","11385","10012","11433","11102","10036","11361","11104","11237","10304","11212","10037","10003","10456","11418","10461","10009","10452","10005","10025","10473","10467","11226","10013","11224","10034","11373","10026","11367","10029","10128","11209","11201","11220","10458","10027","11106","10465","10460","11105","11103","10455","11249","10016","11204","10463","10468","11375","10040","11378","11232","11219","11109","11434","10472","11421","11368","11215","10019","10312","10014","10002","11426","11358","10038","11360","10464","11377","11225","11357","11235","10010","10462","11370","10033","10039","11213","11372","11420","11692","11356","11379","10305","11001","10030","10314","10471","10011","10021","10301","10031","10024","10006","10022","11238","11354","11423","11228","11203","11432","11428","10035","10075","11231","10017","10310","11236","10469","11004","11415","11416","10120","10023","10475","11217","10470","11355","11218","11040","11412","11417","11411","11694","11369","11229","10018","10065","10303","11362","12345","11435","10308","11374","10004","10474","11427","10307","11230","10280","10007","10306","11693","10302","11422","11436","11414","11364","11366","11413","11239","10309","11429","10123","10069","10044","10020","11371","11697","10162","11363","10112","10282","10000","10170","10177","10105","10045","10279","10178","10119","11359","11430","10165","10169","10103","10048","10121"]}}')},163:function(e,t){},219:function(e,t,a){},220:function(e,t,a){},241:function(e,t){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(36),o=a.n(n),r=(a(219),a(220),a(106)),l=a(144),c=a(305),h=a(309),d=a(9);const p="pk.eyJ1IjoibWVsb2R5cGh1IiwiYSI6ImNrbjJlbms0eDE2eTkyb21vb3RpOTJtYmoifQ.KyZkOMUbvjs8btwGKqNyjg",u={longitude:-74,latitude:40.75,zoom:9,maxZoom:16,pitch:0,bearing:0};class b extends i.a.Component{constructor(e){super(e),this.state={layers:[],mapData:{}}}updateData(e){this.setState({mapData:e})}generateLayer(){var e=[];for(const t in this.state.mapData){let a=this.state.mapData[t].Location,s=a.slice(1,a.length-1).split(", ");s&&2===s.length&&e.push({coordinates:[parseFloat(s[0]),parseFloat(s[1])],weight:1})}return[new h.a({id:"heatmapLayer",data:e,getPosition:e=>e.coordinates,getWeight:e=>e.weight,aggregation:"SUM"})]}componentWillReceiveProps(e){this.updateData(e.mapData)}componentDidMount(){this.updateData(this.props.mapData)}render(){return Object(d.jsx)("div",{children:Object(d.jsx)(c.a,{className:"HeatMap",initialViewState:u,controller:!0,layers:this.generateLayer(),viewState:this.props.viewState,children:Object(d.jsx)(l.a,{mapStyle:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",mapboxApiAccessToken:p})})})}}var j=b,m=a(194),g=a(296),x=a(165),O=a(307);const f="pk.eyJ1IjoibWVsb2R5cGh1IiwiYSI6ImNrbjJlbms0eDE2eTkyb21vb3RpOTJtYmoifQ.KyZkOMUbvjs8btwGKqNyjg",y={longitude:-74,latitude:40.75,zoom:10,minZoom:10,maxZoom:20,pitch:40.5,bearing:0},w=new m.a({color:[255,255,255],intensity:1}),v=new g.a({color:[255,255,255],intensity:.8,position:[-.144528,49.739968,8e4]}),S=new g.a({color:[255,255,255],intensity:.8,position:[-3.807751,54.104682,8e3]}),C=new x.a({ambientLight:w,pointLight1:v,pointLight2:S}),D={ambient:.64,diffuse:.6,shininess:32,specularColor:[51,51,51]},M=[[1,152,189],[73,227,206],[216,254,181],[254,237,177],[254,173,84],[209,55,78]];class k extends i.a.Component{constructor(e){super(e),this.state={layers:[],mapData:{}}}updateData(e){this.setState({mapData:e})}getTooltipInfo({object:e}){if(!e)return null;const t=e.position[1],a=e.position[0],s=e.points.length;return"          latitude: ".concat(Number.isFinite(t)?t.toFixed(6):"","\n          longitude: ").concat(Number.isFinite(a)?a.toFixed(6):"","\n          ").concat(s," Incidents")}generateLayer(){var e=[];for(const t in this.state.mapData){let a=this.state.mapData[t].Location,s=a.slice(1,a.length-1).split(", ");s&&2===s.length&&e.push({coordinates:[parseFloat(s[0]),parseFloat(s[1])],weight:1})}return[new O.a({id:"heatmap",colorRange:M,coverage:.6,data:e,elevationRange:[0,500],elevationDomain:[0,5e3],elevationScale:e&&e.length?50:0,extruded:!0,getPosition:e=>e.coordinates,pickable:!0,radius:100,upperPercentile:100,material:D,transitions:{elevationScale:200}})]}componentWillReceiveProps(e){this.updateData(e.mapData)}componentDidMount(){this.updateData(this.props.mapData)}render(){return Object(d.jsx)("div",{children:Object(d.jsx)(c.a,{className:"HexagonMap",initialViewState:y,controller:!0,layers:this.generateLayer(),viewState:this.props.viewState,getTooltip:this.getTooltipInfo,effects:[C],children:Object(d.jsx)(l.a,{reuseMaps:!0,mapStyle:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",preventStyleDiffing:!0,mapboxApiAccessToken:f})})})}}var N=k,F=a(318),R=a(196),L=a(298);const I="#ffc34b",P=Object(R.a)({overrides:{MuiSlider:{valueLabel:{left:"0%","& *":{background:"black",color:I}},thumb:{color:I},track:{color:I},rail:{opacity:"90%",color:"#ffdd99"},markLabelActive:{fontSize:"13px",color:"white"},markLabel:{fontSize:"13px",color:"white"},mark:{color:"white",height:"5px"}}}}),T=[{value:0,label:"Jan '20"},{value:12,label:"Jan '21"}],J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],V=[31,{2020:28,2021:27},31,30,31,30,31,31,30,31,30,31];class B extends i.a.Component{constructor(e){super(e),this.handleChange=(e,t)=>{let a=[Math.min(...t),Math.max(...t)];this.props.updateDateRange(this.toStrings(a)),this.setState({dateRange:a})},this.prettifyText=e=>{let t=20+Math.floor(e/12);return J[e%12]+" '"+t.toString()},this.toStrings=e=>{const[t,a]=e;let s=2020+Math.floor(t/12),i=(t%12+1).toString()+"/"+1..toString()+"/"+s.toString()+" 00:00:00 AM",n=2020+Math.floor(a/12),o=a%12+1,r=2===o?V[o-1][n]:V[o-1];return[i,o.toString()+"/"+r.toString()+"/"+n.toString()+" 11:59:59 PM"]},this.state={dateRange:[0,26]}}render(){return Object(d.jsxs)("div",{styles:{width:300},children:[Object(d.jsx)("br",{}),Object(d.jsx)(L.a,{theme:P,children:Object(d.jsx)(F.a,{value:this.state.dateRange,onChange:this.handleChange,valueLabelDisplay:"auto","aria-labelledby":"discrete-slider-custom",valueLabelFormat:this.prettifyText,marks:T,min:0,max:14})})]})}}var H=B,W=a(73),A=a(304),G=a(303),Q=a(302),Y=a(316),z=a(308),E=a(312),Z=a(317),K=a(301),U=a(315),q=a(110);a(186),a(247);const X="#ffdd99",$="#ffc34b",_="#2b2d2f",ee="#555658",te={color:$,height:"20px"},ae={color:"white"},se={color:"black"},ie={paddingTop:"15px",paddingBottom:"15px"},ne={paddingLeft:"15px",paddingRight:"15px",paddingBottom:"15px"},oe={PaperProps:{style:{maxHeight:224,width:250}}},re=["borough","neighborhood","Incident Zip","Location Type"];class le extends i.a.Component{constructor(e){super(e),this.menuIconClick=()=>{this.setMenuCollapse(!this.state.menuCollapse)},this.onSubmit=()=>{this.props.showModal(),setTimeout((()=>{this.props.updateMapData(this.state.dateRange,this.state.selectedFilters)}),2e3)},this.switchMapView=(e,t)=>{null!=t&&(this.setState({mapView:t}),this.props.switchMapView(t))},this.prettifyText=e=>"borough"===e?"Borough":"neighborhood"===e?"Neighborhood":e,this.handleDateRange=e=>{this.setState({dateRange:e})},this.handleChangeMultiple=e=>{const t=e.target.value,a=e.target.name;let s=this.state.selectedFilters;s[a]=t.slice(),this.setState({selectedFilters:s})},this.state={menuCollapse:!1,filterOptions:r.filterOptions,selectedFilters:JSON.parse(JSON.stringify(r.filterOptions)),dateRange:["1/1/2019 00:00:00 AM","3/31/20212 11:59:59 PM"],mapView:1}}setMenuCollapse(e){this.setState({menuCollapse:e})}getSidebarContent(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{style:te,children:"Map Type"},"map type header"),Object(d.jsx)("div",{style:ie,children:Object(d.jsxs)(U.a,{value:this.state.mapView,size:"small",exclusive:!0,onChange:this.switchMapView,"aria-label":"map view",children:[Object(d.jsx)(K.a,{value:0,"aria-label":"heat map",style:0==this.state.mapView?{backgroundColor:ee,color:X}:{backgroundColor:_,color:X},disabled:0==this.state.mapView,children:"Heat Map"}),Object(d.jsx)(K.a,{value:1,"aria-label":"hexagon map",style:1==this.state.mapView?{backgroundColor:ee,color:X}:{backgroundColor:_,color:X},disabled:1==this.state.mapView,children:"Hexagon Map"})]})}),Object(d.jsx)("div",{style:te,children:"Filters"},"filter header"),Object(d.jsx)("br",{}),re.map((e=>{const t=this.state.filterOptions[e];return Object(d.jsxs)(Q.a,{style:{minWidth:120,maxWidth:300},id:e+"-form",children:[Object(d.jsx)("div",{style:ae,children:this.prettifyText(e)}),Object(d.jsx)("br",{}),Object(d.jsx)(z.a,{labelId:"multiple-select-"+e,id:e,name:e,multiple:!0,value:this.state.selectedFilters[e],onChange:this.handleChangeMultiple,input:Object(d.jsx)(G.a,{id:e},e+"-input"),renderValue:e=>e.join(", "),MenuProps:oe,style:{backgroundColor:_,color:X,paddingLeft:"10px",width:"260px",paddingRight:"5px",borderRadius:"5px"},children:t.map((t=>Object(d.jsxs)(Y.a,{value:t,children:[Object(d.jsx)(E.a,{checked:this.state.selectedFilters[e].indexOf(t)>-1,color:"default"}),Object(d.jsx)(Z.a,{primary:t},t+"-list-item-text")]},t)))},e),Object(d.jsx)("br",{})]},e+"-form")})),Object(d.jsx)("br",{}),Object(d.jsx)("div",{style:ae,children:"Select Date Range"}),Object(d.jsx)("div",{style:ne,children:Object(d.jsx)(H,{updateDateRange:this.handleDateRange})}),Object(d.jsx)("div",{style:{paddingTop:"0px"},children:Object(d.jsx)(A.a,{variant:"contained",onClick:this.onSubmit,style:{color:$,size:"small",backgroundColor:_},children:"Apply Filters"})})]})}render(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{id:"header",children:Object(d.jsxs)(W.a,{collapsed:this.state.menuCollapse,style:se,children:[Object(d.jsxs)(W.d,{children:[Object(d.jsx)("div",{className:"logotext",children:Object(d.jsx)("p",{children:this.state.menuCollapse?"A4":"The City that Never Sleeps"})}),Object(d.jsx)("div",{className:"closemenu",onClick:this.menuIconClick,children:this.state.menuCollapse?Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(q.c,{color:$})}):Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(q.b,{color:$})})})]}),!this.state.menuCollapse&&Object(d.jsx)("div",{children:Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(W.b,{children:this.getSidebarContent()})})})})]})})})}}var ce=le;a(248);const he="#ffdd99",de="#ffc34b",pe={color:de,height:"20px"},ue={color:"white"};class be extends i.a.Component{constructor(e){super(e),this.menuIconClick=()=>{this.setMenuCollapse(!this.state.menuCollapse)},this.state={menuCollapse:!0,urlOpenData:"https://data.cityofnewyork.us/Social-Services/311-Noise-Complaints/p5f6-bkga",urlGithub:"https://github.com/6859-sp21/a4-thecitythatneversleeps"}}setMenuCollapse(e){this.setState({menuCollapse:e})}getSidebarContent(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("a",{children:"The data used in this visualization was gathered from NYC Open Data, a free public data project published by New York City agencies and other partners. Here we have created a compilation of noise complaints in New York City, and you can look at the data yourself"}),Object(d.jsx)("a",{children:" "}),Object(d.jsx)("a",{href:this.state.urlOpenData,style:{color:he},rel:"noreferrer",children:" here"}),Object(d.jsx)("a",{children:"."})]}),Object(d.jsx)("p",{children:'On the left, you can toggle instantly between a heat map and hexagon map. You can also filter the data via dropdowns, and select the range of time over which you want to observe aggregate trends. Press the "apply filters" button to see the map update. You can pan, zoom, and adjust the angle the map using normal 3D controls.'}),Object(d.jsxs)("p",{children:[Object(d.jsx)("a",{children:"For more information on this project, including how we processed the dataset, check out our Github repository at"}),Object(d.jsx)("a",{children:" "}),Object(d.jsx)("a",{href:this.state.urlGithub,style:{color:he},rel:"noreferrer",children:"this link"}),Object(d.jsx)("a",{children:"."})]})]})}render(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{id:"info-header",style:ue,children:Object(d.jsxs)(W.a,{className:"pro-sidebar",collapsed:this.state.menuCollapse,style:ue,children:[Object(d.jsx)(W.d,{className:"pro-sidebar-header",children:Object(d.jsx)("div",{onClick:this.menuIconClick,children:this.state.menuCollapse?Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(q.a,{color:de})}):Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(q.d,{color:de})})})}),!this.state.menuCollapse&&Object(d.jsx)("div",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"space",children:Object(d.jsx)(W.b,{children:this.getSidebarContent()})}),Object(d.jsx)("div",{className:"bottom-space",children:Object(d.jsx)(W.c,{children:Object(d.jsx)("div",{style:pe,children:"Amanda Horne, Melody Phu, Magdalena Price"})})})]})})]})})})}}var je=be,me=a(313);const ge={display:"flex",alignItems:"center",justifyContent:"center","&:hover":{outline:"none"},"&:focus":{outline:"none"}},xe=Object(d.jsx)("div",{children:Object(d.jsx)("h2",{id:"simple-modal-title",color:"#ffdd99",children:Object(d.jsx)("div",{style:{color:"#ffdd99",height:"20px",padding:"20px"},children:"Data Loading ..."})})});class Oe extends i.a.Component{render(){return Object(d.jsx)(me.a,{style:ge,open:this.props.show,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(d.jsx)("div",{className:"textspace",children:xe})})}}class fe extends i.a.Component{constructor(e){super(e),this.handleDrawerOpen=()=>{this.setState({openSidebar:!0})},this.handleDrawerClose=()=>{this.setState({openSidebar:!1})},this.showModal=()=>{this.setState({show:!0})},this.getMapData=()=>{console.log("fetching data"),fetch("https://thecitythatneversleep.s3.us-east-2.amazonaws.com/allMapData.json").then((e=>e.json())).then((e=>{console.log("success!"),this.setState({show:!1,mapData:e,filteredData:JSON.parse(JSON.stringify(e))})})).catch((e=>{console.error(e)}))},this.switchMapView=e=>{this.setState({mapView:e})},this.updateMapData=(e,t)=>{const a=new Date(e[0]),s=new Date(e[1]);let i=this.state.mapData;var n=[];for(const o of i){let e=!0,i=new Date(o["Created Date"]);(i>s||i<a)&&(e=!1);for(const a in t){let s=t[a],i=o[a];s.includes(i)||(e=!1)}e&&n.push(JSON.parse(JSON.stringify(o)))}this.setState({show:!1,filteredData:n})},this.state={show:!0,mapView:1,mapData:[],filteredData:[],layers:[],iconData:[],startDatetime:"January 1, 2019, 00:00:00 AM",endDatetime:"March 31, 2021, 11:59:59 PM",openSidebar:!1,filterOptions:r.filterOptions}}componentDidMount(){this.getMapData(),this.setState({filterOptions:r.filterOptions})}render(e){return Object(d.jsxs)("div",{children:[0===this.state.mapView?Object(d.jsx)(j,{mapData:this.state.filteredData,viewState:e}):Object(d.jsx)(N,{mapData:this.state.filteredData,viewState:e}),Object(d.jsx)(je,{}),Object(d.jsx)(ce,{updateMapData:this.updateMapData,open:this.state.openSidebar,filterOptions:this.state.filterOptions,showModal:this.showModal,switchMapView:this.switchMapView}),Object(d.jsx)(Oe,{show:this.state.show})]})}}var ye=fe,we=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,319)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),s(e),i(e),n(e),o(e)}))};o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(ye,{})}),document.getElementById("root")),we()}},[[249,1,2]]]);
//# sourceMappingURL=main.76c8fef3.chunk.js.map